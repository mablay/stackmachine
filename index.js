function $(){}var Ye=e=>e;function je(e){return e()}function Ee(){return Object.create(null)}function F(e){e.forEach(je)}function Ce(e){return typeof e=="function"}function z(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function Ze(e){return Object.keys(e).length===0}var qe=typeof window!="undefined",et=qe?()=>window.performance.now():()=>Date.now(),ce=qe?e=>requestAnimationFrame(e):$,X=new Set;function Ae(e){X.forEach(t=>{t.c(e)||(X.delete(t),t.f())}),X.size!==0&&ce(Ae)}function tt(e){let t;return X.size===0&&ce(Ae),{promise:new Promise(n=>{X.add(t={c:e,f:n})}),abort(){X.delete(t)}}}function _(e,t){e.appendChild(t)}function De(e){if(!e)return document;let t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function ot(e){let t=m("style");return nt(De(e),t),t}function nt(e,t){_(e.head||e,t)}function q(e,t,n){e.insertBefore(t,n||null)}function j(e){e.parentNode.removeChild(e)}function le(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function m(e){return document.createElement(e)}function H(e){return document.createTextNode(e)}function S(){return H(" ")}function L(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function x(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function st(e){return Array.from(e.childNodes)}function G(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function oe(e,t){e.value=t==null?"":t}function Ne(e,t,n=!1){let o=document.createEvent("CustomEvent");return o.initCustomEvent(e,n,!1,t),o}var ue=new Set,se=0;function at(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}function ze(e,t,n,o,s,a,r,i=0){let c=16.666/o,d=`{
`;for(let w=0;w<=1;w+=c){let C=t+(n-t)*a(w);d+=w*100+`%{${r(C,1-C)}}
`}let f=d+`100% {${r(n,1-n)}}
}`,l=`__svelte_${at(f)}_${i}`,u=De(e);ue.add(u);let v=u.__svelte_stylesheet||(u.__svelte_stylesheet=ot(e).sheet),h=u.__svelte_rules||(u.__svelte_rules={});h[l]||(h[l]=!0,v.insertRule(`@keyframes ${l} ${f}`,v.cssRules.length));let b=e.style.animation||"";return e.style.animation=`${b?`${b}, `:""}${l} ${o}ms linear ${s}ms 1 both`,se+=1,l}function it(e,t){let n=(e.style.animation||"").split(", "),o=n.filter(t?a=>a.indexOf(t)<0:a=>a.indexOf("__svelte")===-1),s=n.length-o.length;s&&(e.style.animation=o.join(", "),se-=s,se||rt())}function rt(){ce(()=>{se||(ue.forEach(e=>{let t=e.__svelte_stylesheet,n=t.cssRules.length;for(;n--;)t.deleteRule(n);e.__svelte_rules={}}),ue.clear())})}var J;function K(e){J=e}function Oe(){if(!J)throw new Error("Function called outside component initialization");return J}function fe(){let e=Oe();return(t,n)=>{let o=e.$$.callbacks[t];if(o){let s=Ne(t,n);o.slice().forEach(a=>{a.call(e,s)})}}}function pe(e,t){let n=e.$$.callbacks[t.type];n&&n.slice().forEach(o=>o.call(this,t))}var W=[],Y=[],ae=[],de=[],ct=Promise.resolve(),_e=!1;function lt(){_e||(_e=!0,ct.then(Pe))}function Q(e){ae.push(e)}function me(e){de.push(e)}var he=!1,ge=new Set;function Pe(){if(!he){he=!0;do{for(let e=0;e<W.length;e+=1){let t=W[e];K(t),ut(t.$$)}for(K(null),W.length=0;Y.length;)Y.pop()();for(let e=0;e<ae.length;e+=1){let t=ae[e];ge.has(t)||(ge.add(t),t())}ae.length=0}while(W.length);for(;de.length;)de.pop()();_e=!1,he=!1,ge.clear()}}function ut(e){if(e.fragment!==null){e.update(),F(e.before_update);let t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Q)}}var Z;function ft(){return Z||(Z=Promise.resolve(),Z.then(()=>{Z=null})),Z}function ve(e,t,n){e.dispatchEvent(Ne(`${t?"intro":"outro"}${n}`))}var re=new Set,U;function ee(){U={r:0,c:[],p:U}}function te(){U.r||F(U.c),U=U.p}function E(e,t){e&&e.i&&(re.delete(e),e.i(t))}function O(e,t,n,o){if(e&&e.o){if(re.has(e))return;re.add(e),U.c.push(()=>{re.delete(e),o&&(n&&e.d(1),o())}),e.o(t)}}var pt={duration:0};function ie(e,t,n,o){let s=t(e,n),a=o?0:1,r=null,i=null,c=null;function d(){c&&it(e,c)}function f(u,v){let h=u.b-a;return v*=Math.abs(h),{a,b:u.b,d:h,duration:v,start:u.start,end:u.start+v,group:u.group}}function l(u){let{delay:v=0,duration:h=300,easing:b=Ye,tick:w=$,css:C}=s||pt,M={start:et()+v,b:u};u||(M.group=U,U.r+=1),r||i?i=M:(C&&(d(),c=ze(e,a,u,h,v,b,C)),u&&w(0,1),r=f(M,h),Q(()=>ve(e,u,"start")),tt(p=>{if(i&&p>i.start&&(r=f(i,h),i=null,ve(e,r.b,"start"),C&&(d(),c=ze(e,a,r.b,r.duration,0,b,s.css))),r){if(p>=r.end)w(a=r.b,1-a),ve(e,r.b,"end"),i||(r.b?d():--r.group.r||F(r.group.c)),r=null;else if(p>=r.start){let g=p-r.start;a=r.a+r.d*b(g/r.duration),w(a,1-a)}}return!!(r||i)}))}return{run(u){Ce(s)?ft().then(()=>{s=s(),l(u)}):l(u)},end(){d(),r=i=null}}}function ye(e,t){O(e,1,1,()=>{t.delete(e.key)})}function ke(e,t,n,o,s,a,r,i,c,d,f,l){let u=e.length,v=a.length,h=u,b={};for(;h--;)b[e[h].key]=h;let w=[],C=new Map,M=new Map;for(h=v;h--;){let k=l(s,a,h),R=n(k),N=r.get(R);N?o&&N.p(k,t):(N=d(R,k),N.c()),C.set(R,w[h]=N),R in b&&M.set(R,Math.abs(h-b[R]))}let p=new Set,g=new Set;function D(k){E(k,1),k.m(i,f),r.set(k.key,k),f=k.first,v--}for(;u&&v;){let k=w[v-1],R=e[u-1],N=k.key,y=R.key;k===R?(f=k.first,u--,v--):C.has(y)?!r.has(N)||p.has(N)?D(k):g.has(y)?u--:M.get(N)>M.get(y)?(g.add(N),D(k)):(p.add(y),u--):(c(R,r),u--)}for(;u--;){let k=e[u];C.has(k.key)||c(k,r)}for(;v;)D(w[v-1]);return w}function be(e,t,n){let o=e.$$.props[t];o!==void 0&&(e.$$.bound[o]=n,n(e.$$.ctx[o]))}function I(e){e&&e.c()}function B(e,t,n,o){let{fragment:s,on_mount:a,on_destroy:r,after_update:i}=e.$$;s&&s.m(t,n),o||Q(()=>{let c=a.map(je).filter(Ce);r?r.push(...c):F(c),e.$$.on_mount=[]}),i.forEach(Q)}function T(e,t){let n=e.$$;n.fragment!==null&&(F(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function dt(e,t){e.$$.dirty[0]===-1&&(W.push(e),lt(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function P(e,t,n,o,s,a,r,i=[-1]){let c=J;K(e);let d=e.$$={fragment:null,ctx:null,props:a,update:$,not_equal:s,bound:Ee(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(c?c.$$.context:[])),callbacks:Ee(),dirty:i,skip_bound:!1,root:t.target||c.$$.root};r&&r(d.root);let f=!1;if(d.ctx=n?n(e,t.props||{},(l,u,...v)=>{let h=v.length?v[0]:u;return d.ctx&&s(d.ctx[l],d.ctx[l]=h)&&(!d.skip_bound&&d.bound[l]&&d.bound[l](h),f&&dt(e,l)),u}):[],d.update(),f=!0,F(d.before_update),d.fragment=o?o(d.ctx):!1,t.target){if(t.hydrate){let l=st(t.target);d.fragment&&d.fragment.l(l),l.forEach(j)}else d.fragment&&d.fragment.c();t.intro&&E(e.$$.fragment),B(e,t.target,t.anchor,t.customElement),Pe()}K(c)}var A=class{$destroy(){T(this,1),this.$destroy=$}$on(t,n){let o=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return o.push(n),()=>{let s=o.indexOf(n);s!==-1&&o.splice(s,1)}}$set(t){this.$$set&&!Ze(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}};function _t(e){let t=e-1;return t*t*t+1}function we(e,{delay:t=0,duration:n=400,easing:o=_t,x:s=0,y:a=0,opacity:r=0}={}){let i=getComputedStyle(e),c=+i.opacity,d=i.transform==="none"?"":i.transform,f=c*(1-r);return{delay:t,duration:n,easing:o,css:(l,u)=>`
			transform: ${d} translate(${(1-l)*s}px, ${(1-l)*a}px);
			opacity: ${c-f*u}`}}function Me(e,t,n){let o=e.slice();return o[2]=t[n],o}function Re(e,t){let n,o=t[2].value+"",s,a,r;return{key:e,first:null,c(){n=m("div"),s=H(o),x(n,"class","element svelte-16fy0f6"),this.first=n},m(i,c){q(i,n,c),_(n,s),r=!0},p(i,c){t=i,(!r||c&1)&&o!==(o=t[2].value+"")&&G(s,o)},i(i){r||(Q(()=>{a||(a=ie(n,we,{y:-50},!0)),a.run(1)}),r=!0)},o(i){a||(a=ie(n,we,{y:-50},!1)),a.run(0),r=!1},d(i){i&&j(n),i&&a&&a.end()}}}function mt(e){let t,n,o,s,a=[],r=new Map,i,c=e[0],d=f=>f[2].id;for(let f=0;f<c.length;f+=1){let l=Me(e,c,f),u=d(l);r.set(u,a[f]=Re(u,l))}return{c(){t=m("div"),n=m("h4"),n.textContent="Stack",o=S(),s=m("div");for(let f=0;f<a.length;f+=1)a[f].c();x(s,"class","stack svelte-16fy0f6"),x(t,"class","stack-container svelte-16fy0f6")},m(f,l){q(f,t,l),_(t,n),_(t,o),_(t,s);for(let u=0;u<a.length;u+=1)a[u].m(s,null);i=!0},p(f,[l]){l&1&&(c=f[0],ee(),a=ke(a,l,d,1,f,c,r,s,ye,Re,null,Me),te())},i(f){if(!i){for(let l=0;l<c.length;l+=1)E(a[l]);i=!0}},o(f){for(let l=0;l<a.length;l+=1)O(a[l]);i=!1},d(f){f&&j(t);for(let l=0;l<a.length;l+=1)a[l].d()}}}function ht(e,t,n){let o;console.log("component/stack.svelte");let{stack:s=[]}=t;return e.$$set=a=>{"stack"in a&&n(1,s=a.stack)},e.$$.update=()=>{if(e.$$.dirty&2){e:n(0,o=s.slice().reverse())}},[o,s]}var He=class extends A{constructor(t){super();P(this,t,ht,mt,z,{stack:1})}},Fe=He;function gt(e){let t,n,o,s,a;return{c(){t=m("div"),n=m("h4"),n.textContent="Heap",o=S(),s=m("pre"),a=H(e[0])},m(r,i){q(r,t,i),_(t,n),_(t,o),_(t,s),_(s,a)},p(r,[i]){i&1&&G(a,r[0])},i:$,o:$,d(r){r&&j(t)}}}function vt(e,t,n){let o,{heap:s=[3,99,7,2]}=t;return e.$$set=a=>{"heap"in a&&n(1,s=a.heap)},e.$$.update=()=>{if(e.$$.dirty&2){e:n(0,o=s.map(a=>a.toString(16).padStart(2,"0").toUpperCase()).join(""))}},[o,s]}var Ue=class extends A{constructor(t){super();P(this,t,vt,gt,z,{heap:1})}},Be=Ue;function yt(e){let t,n,o=e[0].operation+"",s,a,r,i,c,d;return{c(){t=m("div"),n=m("div"),s=H(o),a=S(),r=m("div"),i=H(e[1]),x(n,"class","code svelte-1f4u06s"),x(r,"class","name"),x(t,"class","opcode svelte-1f4u06s")},m(f,l){q(f,t,l),_(t,n),_(n,s),_(t,a),_(t,r),_(r,i),c||(d=L(t,"click",e[3]),c=!0)},p(f,[l]){l&1&&o!==(o=f[0].operation+"")&&G(s,o),l&2&&G(i,f[1])},i:$,o:$,d(f){f&&j(t),c=!1,d()}}}function kt(e,t,n){let o,s=fe(),{code:a="push"}=t,r=()=>s("op",a);return e.$$set=i=>{"code"in i&&n(0,a=i.code)},e.$$.update=()=>{if(e.$$.dirty&1){e:n(1,o=a.name.toUpperCase())}},[a,o,s,r]}var Te=class extends A{constructor(t){super();P(this,t,kt,yt,z,{code:0})}},Le=Te;var ne=[{name:"store",operation:"!"},{name:"fetch",operation:"@"},{name:"push",operation:">"},{name:"pop",operation:"<"},{name:"add",operation:"+"},{name:"subtract",operation:"-"},{name:"equals",operation:"="},{name:"and",operation:"&"},{name:"or",operation:"|"},{name:"drop",operation:"V"},{name:"dup",operation:"D"},{name:"over",operation:"U"},{name:"swap",operation:"S"},{name:"xor",operation:"X"},{name:"if",operation:"?"},{name:"call",operation:":"},{name:"exit",operation:"Q"}];function Ge(e,t,n){let o=e.slice();return o[1]=t[n],o}function Ie(e){let t,n;return t=new Le({props:{code:e[1]}}),t.$on("op",e[0]),{c(){I(t.$$.fragment)},m(o,s){B(t,o,s),n=!0},p:$,i(o){n||(E(t.$$.fragment,o),n=!0)},o(o){O(t.$$.fragment,o),n=!1},d(o){T(t,o)}}}function bt(e){let t,n,o=ne,s=[];for(let r=0;r<o.length;r+=1)s[r]=Ie(Ge(e,o,r));let a=r=>O(s[r],1,1,()=>{s[r]=null});return{c(){t=m("div");for(let r=0;r<s.length;r+=1)s[r].c();x(t,"class","opcode-set svelte-16ryf5k")},m(r,i){q(r,t,i);for(let c=0;c<s.length;c+=1)s[c].m(t,null);n=!0},p(r,[i]){if(i&0){o=ne;let c;for(c=0;c<o.length;c+=1){let d=Ge(r,o,c);s[c]?(s[c].p(d,i),E(s[c],1)):(s[c]=Ie(d),s[c].c(),E(s[c],1),s[c].m(t,null))}for(ee(),c=o.length;c<s.length;c+=1)a(c);te()}},i(r){if(!n){for(let i=0;i<o.length;i+=1)E(s[i]);n=!0}},o(r){s=s.filter(Boolean);for(let i=0;i<s.length;i+=1)O(s[i]);n=!1},d(r){r&&j(t),le(s,r)}}}function wt(e){function t(n){pe.call(this,e,n)}return[t]}var Qe=class extends A{constructor(t){super();P(this,t,wt,bt,z,{})}},Ve=Qe;function xt(e){let t,n,o,s,a,r;return{c(){t=m("div"),n=m("h4"),n.textContent="Program",o=S(),s=m("textarea")},m(i,c){q(i,t,c),_(t,n),_(t,o),_(t,s),oe(s,e[0]),a||(r=L(s,"input",e[1]),a=!0)},p(i,[c]){c&1&&oe(s,i[0])},i:$,o:$,d(i){i&&j(t),a=!1,r()}}}function $t(e,t,n){let{prog:o=""}=t;function s(){o=this.value,n(0,o)}return e.$$set=a=>{"prog"in a&&n(0,o=a.prog)},[o,s]}var Xe=class extends A{constructor(t){super();P(this,t,$t,xt,z,{prog:0})}},Je=Xe;function St(e){let t,n,o,s,a,r,i,c,d,f,l,u,v,h,b,w,C,M,p,g,D,k;function R(y){e[7](y)}let N={};return e[1]!==void 0&&(N.prog=e[1]),n=new Je({props:N}),Y.push(()=>be(n,"prog",R)),u=new Fe({props:{stack:e[0]}}),b=new Be({props:{heap:e[2]}}),p=new Ve({}),p.$on("op",e[5]),{c(){t=m("div"),I(n.$$.fragment),s=S(),a=m("button"),a.textContent="Reset",r=S(),i=m("button"),c=H("Next"),d=S(),f=m("div"),l=m("div"),I(u.$$.fragment),v=S(),h=m("div"),I(b.$$.fragment),w=S(),C=m("br"),M=S(),I(p.$$.fragment),x(a,"class","btn btn-warning svelte-mfwx6z"),i.disabled=e[3],x(i,"class","btn btn-next svelte-mfwx6z"),x(l,"class","column svelte-mfwx6z"),x(h,"class","column svelte-mfwx6z"),x(f,"class","row svelte-mfwx6z")},m(y,V){q(y,t,V),B(n,t,null),_(t,s),_(t,a),_(t,r),_(t,i),_(i,c),_(t,d),_(t,f),_(f,l),B(u,l,null),_(f,v),_(f,h),B(b,h,null),_(t,w),_(t,C),_(t,M),B(p,t,null),g=!0,D||(k=[L(a,"click",e[6]),L(i,"click",e[4])],D=!0)},p(y,[V]){let xe={};!o&&V&2&&(o=!0,xe.prog=y[1],me(()=>o=!1)),n.$set(xe),(!g||V&8)&&(i.disabled=y[3]);let $e={};V&1&&($e.stack=y[0]),u.$set($e);let Se={};V&4&&(Se.heap=y[2]),b.$set(Se)},i(y){g||(E(n.$$.fragment,y),E(u.$$.fragment,y),E(b.$$.fragment,y),E(p.$$.fragment,y),g=!0)},o(y){O(n.$$.fragment,y),O(u.$$.fragment,y),O(b.$$.fragment,y),O(p.$$.fragment,y),g=!1},d(y){y&&j(t),T(n),T(u),T(b),T(p),D=!1,F(k)}}}function jt(e,t,n){let{stack:o=[]}=t,{heap:s=[10,20,3,45]}=t,{prog:a="4 D 3 5 + - ="}=t,r=!1,i=p=>new Promise(g=>setTimeout(g,p)),c=[],d={push(){console.log("op: PUSH")},pop(){console.log("op: POP")},async equals(){let p=Number(o.pop().value),g=Number(o.pop().value);n(0,o),await i(500),await w(p===g)},async add(){let p=Number(o.pop().value),g=Number(o.pop().value);n(0,o),await i(500),await w(p+g)},async subtract(){let p=Number(o.pop().value),g=Number(o.pop().value);n(0,o),await i(500),await w(p-g)},async dup(){let p=l();await w(p.value)}};v();async function f(){n(3,r=!0);let p=l();(p==null?void 0:p.type)==="opcode"?(o.pop(),await d[p.value](),c.length===0&&o.length===1&&(o[0]?console.log("SUCCESS!"):console.log("FAILED!"))):c.length>0&&await b(c.shift()),n(3,r=!1)}function l(){if(o.length!==0)return o[o.length-1]}function u({detail:p}){let g=p.name;if(!d[g])return console.log("un-mapped operation:",g);n(1,a=a.trim().concat(" ",p.operation))}function v(){n(0,o=[]),c=[];let p=a.split(" ");for(let g of p){let D=ne.find(k=>k.operation===g);D?c.push({type:"opcode",value:D.name}):c.push({type:"data",value:g})}console.log("program:",c)}let h=0;async function b({type:p,value:g}){let D={id:h++,type:p,value:g};n(0,o=[...o,D]),await i(500)}function w(p){b({type:"data",value:p})}function C(){o.splice(o.length-1,1),n(0,o)}function M(p){a=p,n(1,a)}return e.$$set=p=>{"stack"in p&&n(0,o=p.stack),"heap"in p&&n(2,s=p.heap),"prog"in p&&n(1,a=p.prog)},[o,a,s,r,f,u,v,M]}var Ke=class extends A{constructor(t){super();P(this,t,jt,St,z,{stack:0,heap:2,prog:1})}},We=Ke;var Et=new We({target:document.body}),Ct=Et;export{Ct as default};
//# sourceMappingURL=index.js.map
